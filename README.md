# ğŸ® Text Log RPG: The Survivor

**Gemini 2.0 Flash Function Calling** ê¸°ë°˜ì˜ ë‰´ë¡œ-ì‹¬ë³¼ë¦­ ì•„í‚¤í…ì²˜ í…ìŠ¤íŠ¸ RPG

> "ê²Œì„ì´ ë‹¹ì‹ ì—ê²Œ ë¨¼ì € ë‹¤ê°€ì˜µë‹ˆë‹¤"

---

## âœ¨ ì£¼ìš” íŠ¹ì§•

### ğŸ¤– **í”„ë¡œì•¡í‹°ë¸Œ UX**
- ê²Œì„ì´ ìë™ìœ¼ë¡œ ì˜¤í”„ë‹ ìŠ¤í† ë¦¬ ìƒì„±
- NPCê°€ ë¨¼ì € í”Œë ˆì´ì–´ì—ê²Œ ë§ì„ ê±¸ì–´ì˜´
- ìƒí™©ì— ë§ëŠ” ìŠ¤ë§ˆíŠ¸ íŒíŠ¸ ì œê³µ (ìƒë‹¨ ë°°ë„ˆ)
- ë¬´ì‘ë‹µ ì‹œ ìë™ ê°€ì´ë“œ

### ğŸ§  **NPC ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ**
- IndexedDB ê¸°ë°˜ ì˜êµ¬ ê¸°ì–µ ì €ì¥
- NPCë§ˆë‹¤ ê³ ìœ í•œ ì„±ê²©ê³¼ ë§íˆ¬
- ê³¼ê±° ëŒ€í™” ë‚´ìš© ê¸°ì–µ ë° ì–¸ê¸‰
- í˜¸ê°ë„ ì‹œìŠ¤í…œ (ì‹ ë¢°ë„ ê¸°ë°˜)
- NPC ê°„ ì†Œë¬¸ ì „íŒŒ ë° ê´€ê³„ë§

### ğŸ“œ **ë™ì  í€˜ìŠ¤íŠ¸ ìƒì„±**
- ì„¸ê³„ ì´ë²¤íŠ¸ ìë™ ë°œìƒ
- NPC ë™ê¸°ì™€ ì„±ê²© ê¸°ë°˜ í€˜ìŠ¤íŠ¸ ì œì•ˆ
- ì‹ ë¢°ë„ 40 ì´ìƒì—ì„œ í€˜ìŠ¤íŠ¸ ì œê³µ
- ë³µí•© ì¡°ê±´ í€˜ìŠ¤íŠ¸ (ì „íˆ¬+íƒí—˜+ìˆ˜ì§‘)

### âš”ï¸ **Function Calling ì‹œìŠ¤í…œ**
- ììœ ë¡œìš´ í…ìŠ¤íŠ¸ ì…ë ¥ (`"ìŠ¬ë¼ì„ì„ ê³µê²©í•œë‹¤"`)
- Geminiê°€ ìë™ìœ¼ë¡œ ì ì ˆí•œ í•¨ìˆ˜ í˜¸ì¶œ
- ì „íˆ¬, ì´ë™, ì¡°ì‚¬, ì•„ì´í…œ ì‚¬ìš©, íœ´ì‹ ë“±
- LLM ê¸°ë°˜ ëª°ì…ê° ìˆëŠ” ë‚´ëŸ¬í‹°ë¸Œ ìƒì„±

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì„¤ì¹˜

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install
```

### 2. í™˜ê²½ ì„¤ì •

`.env.local` íŒŒì¼ ìƒì„±:

```env
VITE_GEMINI_API_KEY=your_gemini_api_key_here
```

> **ğŸ’¡ íŒ**: Gemini API í‚¤ëŠ” [Google AI Studio](https://makersuite.google.com/app/apikey)ì—ì„œ ë¬´ë£Œë¡œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3. ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
pnpm dev
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000` ì—´ê¸°

---

## ğŸ¯ í”Œë ˆì´ ë°©ë²•

### ìºë¦­í„° ìƒì„±
1. ëª¨í—˜ê°€ ì´ë¦„ ì…ë ¥
2. ì§ì—… ì„ íƒ (ì „ì‚¬/ê¶ìˆ˜/ë§ˆë²•ì‚¬)
3. "ëª¨í—˜ ì‹œì‘" í´ë¦­

### ê²Œì„ í”Œë ˆì´

**ë°©ë²• 1: ì„ íƒì§€ í´ë¦­**
```
ğŸ’¬ ì„ íƒí•˜ì„¸ìš”:
[ë¬´ìŠ¨ ì¼ì´ì‹ ê°€ìš”?]  [ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤]  [ë‚˜ì¤‘ì— ë‹¤ì‹œ ì˜¤ê² ìŠµë‹ˆë‹¤]
```

**ë°©ë²• 2: ììœ  í…ìŠ¤íŠ¸ ì…ë ¥** (ì¶”ì²œ!)
```
> ìŠ¬ë¼ì„ì„ ê³µê²©í•œë‹¤
> ì£¼ë³€ì„ ì¡°ì‚¬í•œë‹¤
> ëŒ€ì¥ê°„ìœ¼ë¡œ ì´ë™í•œë‹¤
> ì²´ë ¥ í¬ì…˜ì„ ì‚¬ìš©í•œë‹¤
```

### í€˜ìŠ¤íŠ¸ íšë“
1. NPCì™€ ëŒ€í™” (ì„ íƒì§€ í´ë¦­)
2. ì‹ ë¢°ë„ ì¦ê°€ (í˜¸ê°ë„ ìƒìŠ¹)
3. **"ğŸ“œ í€˜ìŠ¤íŠ¸ë¥¼ ë°›ìŠµë‹ˆë‹¤"** ë²„íŠ¼ ì¶œí˜„ (ì‹ ë¢°ë„ 40+)
4. í€˜ìŠ¤íŠ¸ ìˆ˜ë½ ë° ì§„í–‰

---

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React** + **TypeScript** + **Vite**
- **TailwindCSS** (ìŠ¤íƒ€ì¼ë§)
- **Lucide React** (ì•„ì´ì½˜)

### AI/ML
- **Google Gemini 2.0 Flash Exp**
  - Function Calling (ë„êµ¬ í˜¸ì¶œ)
  - ë‚´ëŸ¬í‹°ë¸Œ ìƒì„±
  - NPC ëŒ€í™” ìƒì„±

### ë°ì´í„°ë² ì´ìŠ¤
- **IndexedDB** (Dexie.js)
  - NPC ë©”ëª¨ë¦¬ ì˜êµ¬ ì €ì¥
  - ëŒ€í™” ê¸°ë¡ ì €ì¥
  - í˜¸ê°ë„ ê´€ë¦¬

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ App.tsx                          # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ types.ts                         # íƒ€ì… ì •ì˜
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ proactiveEventService.ts     # í”„ë¡œì•¡í‹°ë¸Œ UX
â”‚   â”œâ”€â”€ arbiterService.ts            # ì¤‘ì¬ì (ê·œì¹™ ê²€ì¦)
â”‚   â”œâ”€â”€ npcMemoryService.ts          # NPC ë©”ëª¨ë¦¬ (IndexedDB)
â”‚   â”œâ”€â”€ npcDialogueService.ts        # NPC ëŒ€í™” ìƒì„±
â”‚   â”œâ”€â”€ questGeneratorService.ts     # ë™ì  í€˜ìŠ¤íŠ¸ ìƒì„±
â”‚   â”œâ”€â”€ toolSystem.ts                # Function Calling ë„êµ¬
â”‚   â””â”€â”€ actionService.ts             # ì•¡ì…˜ ì²˜ë¦¬
â””â”€â”€ index.css                        # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
```

---

## ğŸ¨ ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸

### 1. í”„ë¡œì•¡í‹°ë¸Œ UX
```typescript
// services/proactiveEventService.ts
- generateOpeningScene()  // ìë™ ì˜¤í”„ë‹ ìƒì„±
- triggerProactiveEvent() // NPC ë¨¼ì € ì ‘ê·¼
- provideContextualHint() // ìƒí™©ë³„ íŒíŠ¸
```

**íŠ¹ì§•**:
- 60ì´ˆ ë¬´ì‘ë‹µ ì‹œ íŒíŠ¸ ìë™ ì—…ë°ì´íŠ¸
- ìƒë‹¨ ê³ ì • ë°°ë„ˆë¡œ íŒíŠ¸ í‘œì‹œ
- ë¡œê·¸ ë°©í•´ ì—†ì´ ê¹”ë”í•œ UI

### 2. NPC ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ
```typescript
// services/npcMemoryService.ts
class NPCMemoryDB extends Dexie {
  npcs!: Table<NPCMemory>;
  conversations!: Table<ConversationRecord>;
}
```

**ì €ì¥ ë°ì´í„°**:
- ì„±ê²© (traits)
- ë§íˆ¬ (speech patterns)
- ë™ê¸° (motivations)
- ëŒ€í™” ê¸°ë¡ (10ê°œê¹Œì§€)
- ì‹ ë¢°ë„ (0-100)
- ë§ˆì§€ë§‰ ë§Œë‚¨ ì‹œê°„

### 3. Function Calling
```typescript
// services/toolSystem.ts
export const allTools = [
  attackTool,      // ê³µê²©
  defendTool,      // ë°©ì–´
  moveTool,        // ì´ë™
  investigateTool, // ì¡°ì‚¬
  useItemTool,     // ì•„ì´í…œ ì‚¬ìš©
  restTool         // íœ´ì‹
];
```

**í”Œë¡œìš°**:
```
ì‚¬ìš©ì ì…ë ¥ 
  â†’ Gemini ì˜ë„ íŒŒì•… 
    â†’ ì ì ˆí•œ í•¨ìˆ˜ í˜¸ì¶œ 
      â†’ ê²°ê³¼ ë°˜í™˜ 
        â†’ LLM ë‚´ëŸ¬í‹°ë¸Œ ìƒì„±
```

---

## ğŸ”§ ê°œë°œì ê°€ì´ë“œ

### ìƒˆë¡œìš´ ì•¡ì…˜ ì¶”ê°€

1. **ë„êµ¬ ìŠ¤í‚¤ë§ˆ ì •ì˜** (`toolSystem.ts`)
```typescript
export const newActionTool: FunctionDeclaration = {
  name: "newAction",
  description: "ìƒˆë¡œìš´ ì•¡ì…˜ ì„¤ëª…",
  parameters: {
    type: "object",
    properties: {
      param1: { type: "string", description: "íŒŒë¼ë¯¸í„°" }
    },
    required: ["param1"]
  }
};
```

2. **ì‹¤í–‰ í•¨ìˆ˜ êµ¬í˜„**
```typescript
export function executeNewAction(param1: string): ToolResult {
  return {
    success: true,
    message: "ì•¡ì…˜ ì„±ê³µ!",
    data: { /* ... */ },
    stateChanges: { /* ... */ }
  };
}
```

3. **ë¼ìš°í„°ì— ë“±ë¡**
```typescript
export function executeToolCall(functionName: string, args: any) {
  switch (functionName) {
    case 'newAction':
      return executeNewAction(args.param1);
    // ...
  }
}
```

### NPC ì¶”ê°€

```typescript
// services/npcDialogueService.ts
await createOrUpdateNPC({
  id: 'new_npc_001',
  name: 'ìƒˆë¡œìš´ NPC',
  traits: ['ì¹œì ˆí•œ', 'í˜¸ê¸°ì‹¬ ë§ì€'],
  speechPatterns: ['~êµ°ìš”', '~ëë‹ˆë‹¤'],
  motivations: ['ë§ˆì„ì„ ì§€í‚¤ê³  ì‹¶ë‹¤'],
  trust: 0
});
```

---

## ğŸ“ ì•„í‚¤í…ì²˜ ê°œë…

### ë‰´ë¡œ-ì‹¬ë³¼ë¦­ ì•„í‚¤í…ì²˜

**ë‰´ë¡œ (Neural - LLM)**:
- ìì—°ì–´ ì´í•´ ë° ìƒì„±
- ë‚´ëŸ¬í‹°ë¸Œ ì‘ì„±
- NPC ëŒ€í™” ìƒì„±
- ì˜ë„ ë¶„ë¥˜

**ì‹¬ë³¼ë¦­ (Symbolic - Rules)**:
- ê²Œì„ ê·œì¹™ ê²€ì¦
- ìƒíƒœ ê´€ë¦¬
- ì „íˆ¬ ë¡œì§
- í€˜ìŠ¤íŠ¸ ì¡°ê±´ ê²€ì¦

**í†µí•©**:
```
ì‚¬ìš©ì ì…ë ¥ 
  â†’ [LLM] ì˜ë„ íŒŒì•…
    â†’ [Rules] ê²€ì¦
      â†’ [LLM] í•¨ìˆ˜ í˜¸ì¶œ
        â†’ [Rules] ì‹¤í–‰
          â†’ [LLM] ê²°ê³¼ ì„œìˆ 
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### êµ¬í˜„ëœ ìµœì í™”
- âœ… í”„ë¡œì•¡í‹°ë¸Œ íŒíŠ¸ ì£¼ê¸°: 60ì´ˆ (30ì´ˆâ†’60ì´ˆ)
- âœ… íŒíŠ¸ ë°°ë„ˆ ë¶„ë¦¬ (ë¡œê·¸ í™ìˆ˜ ë°©ì§€)
- âœ… ë¡œê·¸ ìµœëŒ€ 100ê°œ ì œí•œ
- âœ… IndexedDB ëŒ€í™” ê¸°ë¡ 10ê°œ ì œí•œ

### ê¶Œì¥ ì‚¬í•­
- API í˜¸ì¶œ ìµœì†Œí™” (ìºì‹±)
- ì´ë¯¸ì§€/ì—ì…‹ lazy loading
- ë©”ëª¨ë¦¬ ì£¼ê¸°ì  ì •ë¦¬

---

## ğŸ› ì•Œë ¤ì§„ ì œí•œì‚¬í•­

1. **Gemini API í•œë„**
   - ë¬´ë£Œ í”Œëœ: ë¶„ë‹¹ 15íšŒ ì œí•œ
   - í•´ê²°: API í˜¸ì¶œ ê°„ê²© ì¡°ì ˆ

2. **IndexedDB ìš©ëŸ‰**
   - ë¸Œë¼ìš°ì €ë³„ ì œí•œ ìˆìŒ
   - í•´ê²°: ì˜¤ë˜ëœ ë°ì´í„° ìë™ ì‚­ì œ

3. **ë¸Œë¼ìš°ì € í˜¸í™˜ì„±**
   - Chrome/Edge: ì™„ë²½ ì§€ì› âœ…
   - Firefox: í…ŒìŠ¤íŠ¸ í•„ìš”
   - Safari: IndexedDB ì œí•œì 

---

## ğŸ¤ ê¸°ì—¬

ë²„ê·¸ ë¦¬í¬íŠ¸ë‚˜ ê¸°ëŠ¥ ì œì•ˆì€ í™˜ì˜í•©ë‹ˆë‹¤!

### ê°œë°œ í™˜ê²½ ì„¤ì •
```bash
git clone <repository>
cd text-log-rpg_-the-survivor
pnpm install
cp .env.example .env.local
# .env.localì— API í‚¤ ì…ë ¥
pnpm dev
```

---

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ™ ê°ì‚¬ì˜ ë§

- **Google Gemini Team** - í›Œë¥­í•œ AI API ì œê³µ
- **React Team** - ê°•ë ¥í•œ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬
- **Dexie.js** - ì‰¬ìš´ IndexedDB ë˜í¼

---

**ì¦ê±°ìš´ ëª¨í—˜ ë˜ì„¸ìš”!** âš”ï¸âœ¨
